@using Microsoft.Extensions.Localization
@inject IStringLocalizer<SharedResource> Localizer
@model IEnumerable<HarborRestaurant.Entities.Concrete.MenuCategory>

@{
    ViewData["Title"] = Localizer["Menu.Title"];
}

<!-- Hero Section -->
<section class="hero-wrap hero-wrap-2" style="background-image: url('/images/bg_2.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-center">
            <div class="col-md-9 ftco-animate text-center mb-4">
                <h1 class="mb-0 bread">@Localizer["Menu.Title"]</h1>
                <p class="breadcrumbs">
                    <span class="mr-2"><a href="@Url.Action("Index", "Home")">@Localizer["Nav.Home"] <i class="ion-ios-arrow-forward"></i></a></span>
                    <span>@Localizer["Menu.Breadcrumb"] <i class="ion-ios-arrow-forward"></i></span>
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Menu Section -->
<section class="ftco-section">
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
            <div class="col-md-7 heading-section ftco-animate text-center">
                <span class="subheading">Harborlights</span>
                <h2 class="mb-4">@Localizer["Menu.TasteMenu"]</h2>
                <p>@Localizer["Menu.Description"]</p>
            </div>
        </div>
        
        @if (Model != null && Model.Any())
        {
            <div class="row d-md-flex">
                <div class="col-lg-12 ftco-animate p-md-5">
                    <div class="row">
                        <div class="col-md-12 nav-link-wrap mb-5">
                            <div class="nav ftco-animate nav-pills justify-content-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                                @for (int i = 0; i < Model.Count(); i++)
                                {
                                    var category = Model.ElementAt(i);
                                    <a class="nav-link @(i == 0 ? "active" : "")" 
                                       id="v-pills-@(category.CategoryId)-tab" 
                                       data-toggle="pill" 
                                       href="#v-pills-@(category.CategoryId)" 
                                       role="tab" 
                                       aria-controls="v-pills-@(category.CategoryId)" 
                                       aria-selected="@(i == 0 ? "true" : "false")">
                                        @category.Name
                                    </a>
                                }
                            </div>
                        </div>
                        <div class="col-md-12 d-flex align-items-center">
                            <div class="tab-content ftco-animate" id="v-pills-tabContent">
                                @for (int i = 0; i < Model.Count(); i++)
                                {
                                    var category = Model.ElementAt(i);
                                    <div class="tab-pane fade @(i == 0 ? "show active" : "")" 
                                         id="v-pills-@(category.CategoryId)" 
                                         role="tabpanel" 
                                         aria-labelledby="v-pills-@(category.CategoryId)-tab">
                                        
                                        @if (category.MenuItems != null && category.MenuItems.Any())
                                        {
                                            <div class="row">
                                                @foreach (var item in category.MenuItems.Where(mi => mi.IsActive).OrderBy(mi => mi.SortOrder))
                                                {
                                                    <div class="col-md-4 text-center">
                                                        <div class="menu-wrap">
                                                            @if (!string.IsNullOrEmpty(item.ImageUrl))
                                                            {
                                                                <a href="#" class="menu-img img mb-4" style="background-image: url(@item.ImageUrl);"></a>
                                                            }
                                                            else
                                                            {
                                                                <div class="menu-img img mb-4 d-flex align-items-center justify-content-center" style="background-color: #f8f9fa; height: 250px;">
                                                                    <span class="text-muted">@Localizer["Menu.NoPhoto"]</span>
                                                                </div>
                                                            }
                                                            <div class="text">
                                                                <h3>
                                                                    <a href="#">
                                                                        @(System.Globalization.CultureInfo.CurrentCulture.Name == "en" && !string.IsNullOrEmpty(item.NameEn) ? item.NameEn : item.Name)
                                                                        @if (item.IsSpecial)
                                                                        {
                                                                            <span class="badge badge-warning ml-2">@Localizer["Menu.Special"]</span>
                                                                        }
                                                                    </a>
                                                                </h3>
                                                                @{
                                                                    var description = System.Globalization.CultureInfo.CurrentCulture.Name == "en" && !string.IsNullOrEmpty(item.DescriptionEn) ? item.DescriptionEn : item.Description;
                                                                }
                                                                @if (!string.IsNullOrEmpty(description))
                                                                {
                                                                    <p>@description</p>
                                                                }
                                                                <p class="price">
                                                                    <span>â‚º@item.Price.ToString("N2")</span>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="text-center">
                                                <p class="text-muted">@Localizer["Menu.NoProducts"]</p>
                                            </div>
                                        }
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="row">
                <div class="col-12 text-center">
                    <p class="text-muted">@Localizer["Menu.Loading"]</p>
                </div>
            </div>
        }
    </div>
</section>

<!-- CTA Section -->
<section class="ftco-section ftco-no-pt ftco-no-pb ftco-counter img" id="section-counter" style="background-image: url('/images/bg_1.jpg');" data-stellar-background-ratio="0.5">
    <div class="container">
        <div class="row d-md-flex align-items-center">
            <div class="col-lg-6">
                <div class="heading-section pl-md-4 heading-section-with-line">
                    <div class="ftco-animate">
                        <span class="subheading">@Localizer["Reservation.Title"]</span>
                        <h2 class="mb-4">@Localizer["Menu.CelebrationTitle"]</h2>
                        <p>@Localizer["Menu.CelebrationDescription"]</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="text-center">
                    <a href="@Url.Action("Index", "Reservation")" class="btn btn-primary btn-lg">@Localizer["Menu.MakeReservation"]</a>
                </div>
            </div>
        </div>
    </div>
</section>
